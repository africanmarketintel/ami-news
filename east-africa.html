<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>East Africa ‚Äî African Market Intelligence</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,800;1,400;1,600&family=Spectral:ital,wght@0,300;0,400;0,600;1,300;1,400&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
<script>
  const SUPABASE_URL  = 'YOUR_SUPABASE_URL';
  const SUPABASE_ANON = 'YOUR_SUPABASE_ANON_KEY';
  const STRIPE_PREMIUM = 'https://buy.stripe.com/YOUR_PREMIUM_LINK';
  const SECTION_FILTER = 'East Africa';
</script>
<style>
:root{--gold:#C9A84C;--gold-light:#E8C97A;--gold-pale:#FDF6E3;--terra:#B85C38;--ink:#1A1208;--ink-mid:#3D2B1F;--ink-soft:#6B5344;--cream:#FAF7F0;--cream-dark:#F0EAD9;--border:#D4C4A0;--bg:var(--cream);--surface:#fff;--text:var(--ink);--text-soft:var(--ink-soft);--nav-bg:var(--ink);--nav-text:var(--cream);--divider:var(--border);--card-bg:#fff;--accent:#1B6B3A}
[data-theme="dark"]{--bg:#0F0A06;--surface:#1A1208;--text:#EDE5D5;--text-soft:#A89070;--nav-bg:#080502;--nav-text:#EDE5D5;--divider:#3D2B1F;--card-bg:#1F1610;--border:#3D2B1F;--gold-pale:#2A1F10}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Spectral',Georgia,serif;background:var(--bg);color:var(--text);font-size:16px;line-height:1.6;transition:background .3s,color .3s}
a{color:inherit;text-decoration:none}button{cursor:pointer;border:none;background:none;font-family:inherit}
.ticker-bar{background:var(--ink);color:#C9A84C;font-family:'DM Mono',monospace;font-size:11px;padding:6px 0;overflow:hidden;white-space:nowrap}
.ticker-inner{display:inline-flex;gap:48px;animation:ticker 40s linear infinite}
.ticker-item .sym{color:#888}.up{color:#4CAF50}.dn{color:#F44336}
@keyframes ticker{from{transform:translateX(0)}to{transform:translateX(-50%)}}
.top-nav{background:var(--nav-bg);color:var(--nav-text);padding:0 24px;display:flex;align-items:center;justify-content:space-between;height:48px;border-bottom:2px solid var(--gold);position:sticky;top:0;z-index:100}
.nav-logo{font-family:'Playfair Display',serif;font-size:18px;font-weight:800;color:var(--gold)}
.nav-logo span{color:var(--nav-text)}
.nav-links{display:flex;align-items:center}
.nav-link{color:var(--nav-text);font-family:'DM Mono',monospace;font-size:11px;letter-spacing:.08em;text-transform:uppercase;padding:0 14px;height:48px;display:flex;align-items:center;border-right:1px solid #333;transition:color .2s}
.nav-link:first-child{border-left:1px solid #333}.nav-link:hover,.nav-link.active{color:var(--gold)}
.nav-right{display:flex;align-items:center;gap:10px}
.btn-subscribe{background:var(--gold);color:var(--ink);font-family:'DM Mono',monospace;font-size:11px;font-weight:500;letter-spacing:.08em;text-transform:uppercase;padding:8px 16px;border-radius:2px;display:inline-block;transition:background .2s}
.btn-subscribe:hover{background:var(--gold-light)}
.dark-toggle{color:var(--nav-text);font-size:16px;padding:8px;line-height:1;transition:color .2s}
.dark-toggle:hover{color:var(--gold)}
.section-masthead{background:var(--nav-bg);border-bottom:4px solid var(--accent);padding:36px 24px 32px}
.section-masthead-inner{max-width:1280px;margin:0 auto;display:grid;grid-template-columns:1fr auto;gap:32px;align-items:end}
@media(max-width:700px){.section-masthead-inner{grid-template-columns:1fr}}
.section-eyebrow{font-family:'DM Mono',monospace;font-size:10px;letter-spacing:.25em;text-transform:uppercase;color:var(--accent);margin-bottom:10px}
.section-title-xl{font-family:'Playfair Display',serif;font-size:clamp(40px,7vw,80px);font-weight:800;color:white;line-height:.95;letter-spacing:-.03em;margin-bottom:14px}
.section-title-xl span{color:var(--accent)}
.section-strapline{font-family:'Spectral',serif;font-size:15px;color:#999;font-style:italic;font-weight:300;max-width:560px;line-height:1.7}
.section-right{text-align:right}
.section-stat-num{font-family:'Playfair Display',serif;font-size:48px;font-weight:800;color:var(--accent);line-height:1}
.section-stat-label{font-family:'DM Mono',monospace;font-size:10px;color:#666;letter-spacing:.1em;text-transform:uppercase;margin-top:4px}
.sub-nav{background:var(--surface);border-bottom:2px solid var(--divider);overflow-x:auto;scrollbar-width:none}
.sub-nav-inner{display:flex;padding:0 24px;max-width:1280px;margin:0 auto}
.sub-tab{font-family:'DM Mono',monospace;font-size:11px;letter-spacing:.08em;text-transform:uppercase;color:var(--text-soft);padding:12px 18px;border-bottom:3px solid transparent;margin-bottom:-2px;white-space:nowrap;cursor:pointer;transition:color .2s,border-color .2s}
.sub-tab:hover,.sub-tab.active{color:var(--accent);border-bottom-color:var(--accent)}
.page-wrapper{max-width:1280px;margin:0 auto;padding:40px 24px;display:grid;grid-template-columns:1fr 300px;gap:48px;align-items:start}
@media(max-width:900px){.page-wrapper{grid-template-columns:1fr;padding:24px 16px}}
.results-bar{display:flex;align-items:center;justify-content:space-between;padding:0 0 20px;border-bottom:2px solid var(--accent);margin-bottom:24px;flex-wrap:wrap;gap:10px}
.results-count{font-family:'DM Mono',monospace;font-size:11px;letter-spacing:.1em;text-transform:uppercase;color:var(--text-soft)}
.results-count strong{color:var(--accent)}
.sort-select{font-family:'DM Mono',monospace;font-size:11px;background:var(--card-bg);border:1px solid var(--divider);color:var(--text);padding:6px 12px;border-radius:2px;cursor:pointer;outline:none}
.featured-card{background:var(--card-bg);border:1px solid var(--divider);border-top:4px solid var(--accent);margin-bottom:28px;overflow:hidden;cursor:pointer;transition:border-color .2s}
.featured-card:hover{border-top-color:var(--gold)}
.featured-card:hover .fcard-headline{color:var(--accent)}
.fcard-img{width:100%;height:260px;object-fit:cover;display:block}
.fcard-img-ph{width:100%;height:200px;background:linear-gradient(135deg,var(--ink),var(--ink-mid));display:flex;align-items:center;justify-content:center;font-family:'DM Mono',monospace;font-size:12px;color:#555;letter-spacing:.1em}
.fcard-body{padding:24px}
.fcard-label{font-family:'DM Mono',monospace;font-size:9px;letter-spacing:.2em;text-transform:uppercase;background:var(--accent);color:var(--ink);padding:3px 10px;display:inline-block;margin-bottom:12px}
.fcard-headline{font-family:'Playfair Display',serif;font-size:clamp(18px,3vw,26px);font-weight:700;line-height:1.25;margin-bottom:10px;transition:color .2s}
.fcard-standfirst{font-size:14px;color:var(--text-soft);line-height:1.7;font-weight:300;font-style:italic;margin-bottom:14px}
.fcard-meta{font-family:'DM Mono',monospace;font-size:10px;color:var(--text-soft);display:flex;gap:14px;flex-wrap:wrap}
.fcard-meta .author{color:var(--accent)}
.article-list{list-style:none}
.article-row-item{display:grid;grid-template-columns:1fr auto;gap:20px;padding:20px 0;border-bottom:1px solid var(--divider);align-items:start;cursor:pointer;transition:background .15s}
.article-row-item:first-child{border-top:1px solid var(--divider)}
.article-row-item:hover{background:var(--gold-pale);margin:0 -16px;padding-left:16px;padding-right:16px}
[data-theme="dark"] .article-row-item:hover{background:#2A1F10}
.row-kicker{font-family:'DM Mono',monospace;font-size:10px;letter-spacing:.15em;text-transform:uppercase;color:var(--accent);margin-bottom:6px}
.row-headline{font-family:'Playfair Display',serif;font-size:19px;font-weight:700;line-height:1.3;margin-bottom:8px;transition:color .2s}
.article-row-item:hover .row-headline{color:var(--accent)}
.row-standfirst{font-size:14px;color:var(--text-soft);line-height:1.65;font-weight:300;margin-bottom:10px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.row-meta{font-family:'DM Mono',monospace;font-size:10px;color:var(--text-soft);display:flex;gap:12px;flex-wrap:wrap}
.row-meta .author{color:var(--accent)}
.row-img{width:120px;height:90px;object-fit:cover;border:1px solid var(--divider);flex-shrink:0}
.row-img-ph{width:120px;height:90px;background:linear-gradient(135deg,var(--ink-mid),var(--ink));display:flex;align-items:center;justify-content:center;font-size:20px;opacity:.4;flex-shrink:0}
@media(max-width:600px){.row-img,.row-img-ph{display:none}}
.pagination-bar{display:flex;align-items:center;justify-content:center;gap:6px;padding:32px 0 8px;flex-wrap:wrap}
.page-btn{font-family:'DM Mono',monospace;font-size:12px;min-width:38px;height:38px;display:flex;align-items:center;justify-content:center;border:1px solid var(--divider);background:var(--card-bg);color:var(--text-soft);border-radius:2px;cursor:pointer;transition:all .2s;text-decoration:none;padding:0 10px}
.page-btn:hover{border-color:var(--accent);color:var(--accent)}
.page-btn.active{background:var(--accent);border-color:var(--accent);color:white}
.page-btn.disabled{opacity:.35;cursor:not-allowed;pointer-events:none}
.page-ellipsis{font-family:'DM Mono',monospace;font-size:12px;color:var(--text-soft);padding:0 4px}
.skeleton{background:linear-gradient(90deg,var(--divider) 25%,var(--card-bg) 50%,var(--divider) 75%);background-size:200% 100%;animation:shimmer 1.5s infinite;border-radius:2px;margin-bottom:10px}
@keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}
.sidebar-sticky{position:sticky;top:72px}
.sidebar-widget{border:1px solid var(--divider);border-top:3px solid var(--accent);background:var(--card-bg);padding:20px;margin-bottom:24px}
.widget-title{font-family:'DM Mono',monospace;font-size:10px;letter-spacing:.15em;text-transform:uppercase;color:var(--text-soft);margin-bottom:14px;padding-bottom:10px;border-bottom:1px solid var(--divider)}
.top-story{padding:10px 0;border-bottom:1px solid var(--divider);cursor:pointer}
.top-story:last-child{border-bottom:none;padding-bottom:0}
.top-story-num{font-family:'DM Mono',monospace;font-size:20px;font-weight:500;color:var(--divider);line-height:1;margin-bottom:3px}
.top-story-hl{font-family:'Playfair Display',serif;font-size:13px;font-weight:600;line-height:1.35;transition:color .2s}
.top-story:hover .top-story-hl{color:var(--accent)}
.data-row{display:flex;justify-content:space-between;padding:9px 0;border-bottom:1px solid var(--divider);font-family:'DM Mono',monospace;font-size:11px}
.data-row:last-child{border-bottom:none}
.data-label{color:var(--text-soft)}.data-value{font-weight:500}
.newsletter-mini{background:linear-gradient(135deg,#1A1208,#3D2B1F);padding:20px;margin-bottom:24px}
.nw-title{font-family:'Playfair Display',serif;font-size:17px;color:var(--gold);margin-bottom:6px}
.nw-sub{font-size:12px;color:#999;margin-bottom:12px;font-weight:300}
.nw-input{width:100%;background:rgba(255,255,255,.08);border:1px solid #444;color:white;padding:9px 12px;border-radius:2px;font-family:'DM Mono',monospace;font-size:11px;margin-bottom:8px;outline:none}
.nw-input::placeholder{color:#666}
.nw-btn{width:100%;background:var(--gold);color:var(--ink);font-family:'DM Mono',monospace;font-size:11px;font-weight:500;letter-spacing:.1em;text-transform:uppercase;padding:9px;border-radius:2px;cursor:pointer;border:none}
.nw-btn:hover{background:var(--gold-light)}
.empty-state{text-align:center;padding:64px 24px;color:var(--text-soft)}
.empty-icon{font-size:48px;margin-bottom:16px;opacity:.4}
.empty-title{font-family:'Playfair Display',serif;font-size:24px;font-weight:700;margin-bottom:8px}
.empty-sub{font-size:14px;font-weight:300}
.toast{position:fixed;bottom:28px;right:28px;z-index:9999;background:#1B4D1B;border:1px solid #4CAF50;color:#4CAF50;font-family:'DM Mono',monospace;font-size:12px;padding:12px 22px;border-radius:2px;opacity:0;transform:translateY(16px);transition:all .3s;pointer-events:none}
.toast.show{opacity:1;transform:translateY(0)}
footer{background:var(--ink);color:#888;padding:40px 24px 24px;margin-top:48px}
.footer-inner{max-width:1280px;margin:0 auto}
.footer-top{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:40px;padding-bottom:32px;border-bottom:1px solid #333;margin-bottom:24px}
@media(max-width:768px){.footer-top{grid-template-columns:1fr 1fr}}
.footer-brand{font-family:'Playfair Display',serif;font-size:20px;font-weight:800;color:var(--gold);margin-bottom:10px}
.footer-about{font-size:13px;line-height:1.7;font-weight:300;max-width:260px}
.footer-col-title{font-family:'DM Mono',monospace;font-size:10px;letter-spacing:.2em;text-transform:uppercase;color:var(--gold);margin-bottom:12px}
.footer-links{list-style:none}
.footer-links li{padding:4px 0}
.footer-links a{font-size:13px;transition:color .2s;font-weight:300}
.footer-links a:hover{color:var(--gold)}
.footer-bottom{display:flex;justify-content:space-between;font-family:'DM Mono',monospace;font-size:10px;flex-wrap:wrap;gap:10px}
</style>
</head>
<body>
<div class="toast" id="toast"></div>

<div class="ticker-bar"><div class="ticker-inner" id="tickerInner">
  <span style="font-family:'DM Mono',monospace;font-size:11px;padding:0 24px;color:#888">Loading markets‚Ä¶</span>
</div></div>
<nav class="top-nav">
  <div style="display:flex;align-items:center">
    <a href="index.html" class="nav-logo"><span>African Market </span>Intelligence</a>
    <div class="nav-links" style="margin-left:4px">
      <a href="markets.html"     class="nav-link ">Markets</a>
      <a href="politics.html"    class="nav-link ">Politics</a>
      <a href="economy.html"     class="nav-link ">Economy</a>
      <a href="energy.html"      class="nav-link ">Energy</a>
      <a href="archive.html"     class="nav-link">Archive</a>
    </div>
  </div>
  <div class="nav-right">
    <button class="dark-toggle" onclick="toggleDark()" id="themeBtn">üåô</button>
    <a href="index.html" style="font-family:'DM Mono',monospace;font-size:11px;color:var(--nav-text);letter-spacing:.08em;text-transform:uppercase;padding:8px 14px;border:1px solid #444;border-radius:2px;transition:all .2s" onmouseover="this.style.borderColor='#C9A84C'" onmouseout="this.style.borderColor='#444'">‚Üê Home</a>
    <a href="#" id="subscribeBtn" target="_blank" class="btn-subscribe">Subscribe</a>
  </div>
</nav>

<div class="section-masthead">
  <div class="section-masthead-inner">
    <div>
      <div class="section-eyebrow">Regional Coverage</div>
      <div class="section-title-xl">East <span>Africa</span></div>
      <div class="section-strapline">Kenya, Ethiopia, Tanzania, Uganda and the broader East African Community ‚Äî tracking the region's rapid economic development.</div>
    </div>
    <div class="section-right">
      <div class="section-stat-num" id="articleCountDisplay">‚Äî</div>
      <div class="section-stat-label">Articles Published</div>
    </div>
  </div>
</div>
<div class="sub-nav"><div class="sub-nav-inner"><div class="sub-tab active" onclick="setSubFilter(event,'all')">All</div><div class="sub-tab " onclick="setSubFilter(event,'Kenya')">Kenya</div><div class="sub-tab " onclick="setSubFilter(event,'Ethiopia')">Ethiopia</div><div class="sub-tab " onclick="setSubFilter(event,'Tanzania')">Tanzania</div><div class="sub-tab " onclick="setSubFilter(event,'Uganda')">Uganda</div><div class="sub-tab " onclick="setSubFilter(event,'Other')">Other</div></div></div>
<div class="page-wrapper">
  <main>
    <input style="width:100%;background:var(--card-bg);border:1px solid var(--divider);border-left:3px solid var(--accent);color:var(--text);padding:12px 16px;font-family:'Spectral',serif;font-size:15px;outline:none;margin-bottom:24px;transition:border-color .2s" type="text" id="searchInput" placeholder="Search east africa articles‚Ä¶" oninput="handleSearch(this.value)">
    <div class="results-bar">
      <div class="results-count" id="resultsCount">Loading‚Ä¶</div>
      <select class="sort-select" onchange="handleSort(this.value)">
        <option value="newest">Newest first</option>
        <option value="oldest">Oldest first</option>
        <option value="section">By section</option>
      </select>
    </div>
    <div id="featuredContainer"></div>
    <ul class="article-list" id="articleList">
      <li style="padding:20px 0;border-bottom:1px solid var(--divider)"><div class="skeleton" style="height:13px;width:100px"></div><div class="skeleton" style="height:22px;width:80%;margin-top:8px"></div><div class="skeleton" style="height:14px;margin-top:8px"></div><div class="skeleton" style="height:14px;width:60%;margin-top:4px"></div></li><li style="padding:20px 0;border-bottom:1px solid var(--divider)"><div class="skeleton" style="height:13px;width:100px"></div><div class="skeleton" style="height:22px;width:80%;margin-top:8px"></div><div class="skeleton" style="height:14px;margin-top:8px"></div><div class="skeleton" style="height:14px;width:60%;margin-top:4px"></div></li><li style="padding:20px 0;border-bottom:1px solid var(--divider)"><div class="skeleton" style="height:13px;width:100px"></div><div class="skeleton" style="height:22px;width:80%;margin-top:8px"></div><div class="skeleton" style="height:14px;margin-top:8px"></div><div class="skeleton" style="height:14px;width:60%;margin-top:4px"></div></li><li style="padding:20px 0;border-bottom:1px solid var(--divider)"><div class="skeleton" style="height:13px;width:100px"></div><div class="skeleton" style="height:22px;width:80%;margin-top:8px"></div><div class="skeleton" style="height:14px;margin-top:8px"></div><div class="skeleton" style="height:14px;width:60%;margin-top:4px"></div></li><li style="padding:20px 0;border-bottom:1px solid var(--divider)"><div class="skeleton" style="height:13px;width:100px"></div><div class="skeleton" style="height:22px;width:80%;margin-top:8px"></div><div class="skeleton" style="height:14px;margin-top:8px"></div><div class="skeleton" style="height:14px;width:60%;margin-top:4px"></div></li><li style="padding:20px 0;border-bottom:1px solid var(--divider)"><div class="skeleton" style="height:13px;width:100px"></div><div class="skeleton" style="height:22px;width:80%;margin-top:8px"></div><div class="skeleton" style="height:14px;margin-top:8px"></div><div class="skeleton" style="height:14px;width:60%;margin-top:4px"></div></li>
    </ul>
    <div id="paginationBar" class="pagination-bar"></div>
  </main>
  
<aside class="sidebar-sticky">
  <div class="newsletter-mini">
    <div class="nw-title">AMI Morning Brief</div>
    <div class="nw-sub">Markets & analysis before 7am across Africa.</div>
    <input class="nw-input" type="email" id="nwEmail" placeholder="your@email.com">
    <button class="nw-btn" onclick="subscribe()">Subscribe Free ‚Üí</button>
  </div>
  <div class="sidebar-widget">
    <div class="widget-title">Most Read</div>
    <div id="topStoriesList">
      <div class="skeleton" style="height:55px"></div>
      <div class="skeleton" style="height:55px"></div>
      <div class="skeleton" style="height:55px"></div>
    </div>
  </div>
  <div class="sidebar-widget">
    <div class="widget-title">Key Economic Data</div>
    <div class="data-row"><span class="data-label">Nigeria Inflation</span><span class="data-value dn">31.70%</span></div>
    <div class="data-row"><span class="data-label">SA Unemployment</span><span class="data-value dn">32.1%</span></div>
    <div class="data-row"><span class="data-label">Kenya GDP Growth</span><span class="data-value up">5.4%</span></div>
    <div class="data-row"><span class="data-label">Egypt Inflation</span><span class="data-value dn">24.1%</span></div>
    <div class="data-row"><span class="data-label">Ghana Prime Rate</span><span class="data-value">29.0%</span></div>
  </div>
  <div class="sidebar-widget" style="border-top-color:var(--gold)">
    <div class="widget-title">Browse Sections</div>
    <ul class="footer-links" style="list-style:none">
      <li style="padding:5px 0"><a href="markets.html" style="font-size:13px;transition:color .2s" onmouseover="this.style.color='var(--gold)'" onmouseout="this.style.color=''">‚Üí Markets</a></li>
      <li style="padding:5px 0"><a href="economy.html" style="font-size:13px;transition:color .2s" onmouseover="this.style.color='var(--gold)'" onmouseout="this.style.color=''">‚Üí Economy</a></li>
      <li style="padding:5px 0"><a href="politics.html" style="font-size:13px;transition:color .2s" onmouseover="this.style.color='var(--gold)'" onmouseout="this.style.color=''">‚Üí Politics</a></li>
      <li style="padding:5px 0"><a href="energy.html" style="font-size:13px;transition:color .2s" onmouseover="this.style.color='var(--gold)'" onmouseout="this.style.color=''">‚Üí Energy</a></li>
      <li style="padding:5px 0;margin-top:6px;border-top:1px solid var(--divider);padding-top:10px"><a href="west-africa.html" style="font-size:13px;transition:color .2s" onmouseover="this.style.color='var(--gold)'" onmouseout="this.style.color=''">‚Üí West Africa</a></li>
      <li style="padding:5px 0"><a href="east-africa.html" style="font-size:13px;transition:color .2s" onmouseover="this.style.color='var(--gold)'" onmouseout="this.style.color=''">‚Üí East Africa</a></li>
      <li style="padding:5px 0"><a href="north-africa.html" style="font-size:13px;transition:color .2s" onmouseover="this.style.color='var(--gold)'" onmouseout="this.style.color=''">‚Üí North Africa</a></li>
      <li style="padding:5px 0"><a href="southern-africa.html" style="font-size:13px;transition:color .2s" onmouseover="this.style.color='var(--gold)'" onmouseout="this.style.color=''">‚Üí Southern Africa</a></li>
    </ul>
  </div>
</aside>

</div>

<footer>
  <div class="footer-inner">
    <div class="footer-top">
      <div>
        <div class="footer-brand">African Market Intelligence</div>
        <p class="footer-about">The continent's most trusted source for financial news, market data and business intelligence across Africa's 54 markets.</p>
      </div>
      <div>
        <div class="footer-col-title">Sections</div>
        <ul class="footer-links">
          <li><a href="markets.html">Markets</a></li>
          <li><a href="economy.html">Economy</a></li>
          <li><a href="politics.html">Politics</a></li>
          <li><a href="energy.html">Energy</a></li>
        </ul>
      </div>
      <div>
        <div class="footer-col-title">Regions</div>
        <ul class="footer-links">
          <li><a href="west-africa.html">West Africa</a></li>
          <li><a href="east-africa.html">East Africa</a></li>
          <li><a href="north-africa.html">North Africa</a></li>
          <li><a href="southern-africa.html">Southern Africa</a></li>
        </ul>
      </div>
      <div>
        <div class="footer-col-title">Company</div>
        <ul class="footer-links">
          <li><a href="archive.html">Full Archive</a></li>
          <li><a href="about.html">About AMI</a></li>
          <li><a href="careers.html">Careers</a></li>
          <li><a href="contact.html">Contact</a></li>
          <li><a href="privacy.html">Privacy Policy</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <span>¬© 2025 African Market Intelligence Ltd. All rights reserved.</span>
      <span>Terms ¬∑ <a href="privacy.html" style="color:inherit">Privacy</a> ¬∑ Cookie Policy</span>
    </div>
  </div>
</footer>

<script>
const dbGet = async path => {
  const r = await fetch(SUPABASE_URL+'/rest/v1/'+path, {headers:{apikey:SUPABASE_ANON,Authorization:'Bearer '+SUPABASE_ANON}});
  if(!r.ok) throw new Error(r.status);
  return r.json();
};
const dbInsert = async (table,data) => {
  const r = await fetch(SUPABASE_URL+'/rest/v1/'+table, {method:'POST',headers:{apikey:SUPABASE_ANON,Authorization:'Bearer '+SUPABASE_ANON,'Content-Type':'application/json',Prefer:'return=representation'},body:JSON.stringify(data)});
  if(!r.ok) throw new Error(await r.text());
  return r.json();
};
let all=[], filtered=[], currentPage=1, subFilter='all', searchQ='', sortOrd='newest';
const PER_PAGE=20;
document.getElementById('subscribeBtn').href = STRIPE_PREMIUM;
function toggleDark(){const h=document.documentElement,d=h.getAttribute('data-theme')==='dark';h.setAttribute('data-theme',d?'light':'dark');document.getElementById('themeBtn').textContent=d?'üåô':'‚òÄÔ∏è';}
function showToast(msg,type='ok'){const t=document.getElementById('toast');t.textContent=msg;t.style.cssText=type==='error'?'background:#4D1B1B;border-color:#F44336;color:#F44336':'background:#1B4D1B;border-color:#4CAF50;color:#4CAF50';t.classList.add('show');setTimeout(()=>t.classList.remove('show'),4000);}
function renderTicker(markets){if(!markets||!markets.length)return;const items=markets.map(m=>`<span style="display:flex;gap:8px;align-items:center"><span class="sym">${m.id.toUpperCase()}</span> ${m.value} <span class="${m.direction}">${m.direction==='up'?'‚ñ≤':'‚ñº'} ${m.change}</span></span>`).join('');document.getElementById('tickerInner').innerHTML=items+items;}
function articleUrl(a){return 'article.html?id='+a.id;}
function applyFilters(resetPg=true){
  if(resetPg) currentPage=1;
  let r=[...all];
  if(subFilter!=='all') r=r.filter(a=>(a.section||'').toLowerCase().includes(subFilter.toLowerCase())||(a.tags||'').toLowerCase().includes(subFilter.toLowerCase())||(a.author_name||'').toLowerCase().includes(subFilter.toLowerCase()));
  if(searchQ){const q=searchQ.toLowerCase();r=r.filter(a=>(a.headline||'').toLowerCase().includes(q)||(a.standfirst||'').toLowerCase().includes(q)||(a.author_name||'').toLowerCase().includes(q)||(a.tags||'').toLowerCase().includes(q));}
  if(sortOrd==='oldest') r.reverse();
  else if(sortOrd==='section') r.sort((a,b)=>(a.section||'').localeCompare(b.section||''));
  filtered=r;
  const ce=document.getElementById('articleCountDisplay');if(ce) ce.textContent=filtered.length;
  renderArticles();
}
function renderArticles(){
  const total=filtered.length, totalPages=Math.ceil(total/PER_PAGE);
  const start=(currentPage-1)*PER_PAGE, pageItems=filtered.slice(start,start+PER_PAGE);
  const from=start+1,to=Math.min(start+PER_PAGE,total);
  const rc=document.getElementById('resultsCount');
  if(rc) rc.innerHTML=total===0?'No articles found':`Showing <strong>${from}‚Äì${to}</strong> of <strong>${total}</strong> articles`;
  const fc=document.getElementById('featuredContainer');
  const al=document.getElementById('articleList');
  if(!pageItems.length){if(fc)fc.innerHTML='';if(al)al.innerHTML=`<div class="empty-state"><div class="empty-icon">üì∞</div><div class="empty-title">No articles found</div><div class="empty-sub">No ${SECTION_FILTER} coverage yet ‚Äî check back soon.</div></div>`;renderPagination(0);return;}
  let listItems=pageItems;
  if(currentPage===1&&pageItems.length>0&&fc){
    const f=pageItems[0];listItems=pageItems.slice(1);
    fc.innerHTML=`<div class="featured-card" onclick="location.href='${articleUrl(f)}'">
      ${f.hero_image?`<img src="${f.hero_image}" class="fcard-img" onerror="this.outerHTML='<div class=fcard-img-ph>üì∞ ${f.section||''}</div>'">`:`<div class="fcard-img-ph">üì∞ ${f.section||''}</div>`}
      <div class="fcard-body"><span class="fcard-label">Latest</span>
      <div class="fcard-headline">${f.headline}</div>
      <div class="fcard-standfirst">${f.standfirst||''}</div>
      <div class="fcard-meta"><span class="author">By ${f.author_name||'AMI Staff'}</span><span>${f.published_date||''}</span><span>${f.read_time||''} read</span>${f.is_locked?'<span style="color:var(--gold)">üîí Premium</span>':''}</div></div></div>`;
  } else if(fc) fc.innerHTML='';
  if(al) al.innerHTML=listItems.map(a=>`<li class="article-row-item" onclick="location.href='${articleUrl(a)}'">
    <div>
      <div class="row-kicker">${a.section||'News'}</div>
      <div class="row-headline">${a.is_locked?'üîí ':''}${a.headline}</div>
      <div class="row-standfirst">${a.standfirst||''}</div>
      <div class="row-meta"><span class="author">By ${a.author_name||'AMI Staff'}</span><span>${a.published_date||''}</span><span>${a.read_time||''} read</span>${a.is_locked?'<span style="color:var(--gold)">üîí</span>':''}</div>
    </div>
    ${a.hero_image?`<img src="${a.hero_image}" class="row-img" onerror="this.outerHTML='<div class=row-img-ph>üì∞</div>'">`:`<div class="row-img-ph">üì∞</div>`}
  </li>`).join('');
  renderPagination(totalPages);
}
function renderPagination(totalPages){
  const bar=document.getElementById('paginationBar');if(!bar)return;
  if(totalPages<=1){bar.innerHTML='';return;}
  const nums=buildNums(currentPage,totalPages);
  const sf=subFilter!=='all'?'&sub='+encodeURIComponent(subFilter):'';
  const qf=searchQ?'&q='+encodeURIComponent(searchQ):'';
  bar.innerHTML=`<a class="page-btn ${currentPage===1?'disabled':''}" onclick="goTo(event,${currentPage-1})" href="?page=${currentPage-1}${sf}${qf}">‚Üê Prev</a>`+
    nums.map(p=>p==='...'?`<span class="page-ellipsis">‚Ä¶</span>`:`<a class="page-btn ${p===currentPage?'active':''}" onclick="goTo(event,${p})" href="?page=${p}${sf}${qf}">${p}</a>`).join('')+
    `<a class="page-btn ${currentPage===totalPages?'disabled':''}" onclick="goTo(event,${currentPage+1})" href="?page=${currentPage+1}${sf}${qf}">Next ‚Üí</a>`;
}
function buildNums(cur,total){if(total<=7)return Array.from({length:total},(_,i)=>i+1);const p=[1];if(cur>3)p.push('...');for(let i=Math.max(2,cur-1);i<=Math.min(total-1,cur+1);i++)p.push(i);if(cur<total-2)p.push('...');p.push(total);return p;}
function goTo(e,page){e.preventDefault();const total=Math.ceil(filtered.length/PER_PAGE);if(page<1||page>total)return;currentPage=page;renderArticles();window.scrollTo({top:0,behavior:'smooth'});}
function setSubFilter(e,val){e.preventDefault();document.querySelectorAll('.sub-tab').forEach(t=>t.classList.remove('active'));e.target.classList.add('active');subFilter=val;applyFilters();}
function handleSearch(v){searchQ=v.trim();applyFilters();}
function handleSort(v){sortOrd=v;applyFilters();}
function renderTopStories(){const el=document.getElementById('topStoriesList');if(!el)return;all.slice(0,5).forEach((a,i)=>{el.innerHTML+=`<div class="top-story" onclick="location.href='${articleUrl(a)}'"><div class="top-story-num">0${i+1}</div><div class="top-story-hl">${a.headline}</div></div>`;});}
async function subscribe(){
  const input=document.getElementById('nwEmail');const email=input?.value?.trim();
  if(!email||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)){showToast('Please enter a valid email','error');return;}
  try{const ex=await dbGet('subscribers?email=eq.'+encodeURIComponent(email)+'&select=id');
  if(ex&&ex.length){showToast('You are already subscribed!');input.value='';return;}
  await dbInsert('subscribers',{email,source:'section_page',subscribed_at:new Date().toISOString()});
  showToast('‚úì Subscribed! Welcome to AMI Morning Brief.');
  const w=input.closest('.newsletter-mini');if(w)w.innerHTML='<div style="text-align:center;padding:8px 0"><div style="font-size:28px;margin-bottom:8px">üì¨</div><div style="font-family:Playfair Display,serif;font-size:17px;color:#C9A84C;margin-bottom:6px">You are in!</div><div style="font-size:12px;color:#999">First briefing arrives tomorrow.</div></div>';
  }catch(err){showToast('Error: '+err.message,'error');}
}
async function init(){
  const params=new URLSearchParams(window.location.search);
  currentPage=parseInt(params.get('page'))||1;
  if(params.get('sub'))subFilter=params.get('sub');
  if(params.get('q')){searchQ=params.get('q');const si=document.getElementById('searchInput');if(si)si.value=searchQ;}
  try{
    const[articles,markets]=await Promise.all([
      dbGet('articles?is_published=eq.true&select=*&order=created_at.desc'),
      dbGet('markets?select=*')
    ]);
    all=articles.filter(a=>{
      if(SECTION_FILTER==='all') return true;
      return (a.section||'').toLowerCase().includes(SECTION_FILTER.toLowerCase())||
             (a.tags||'').toLowerCase().includes(SECTION_FILTER.toLowerCase());
    });
    const ce=document.getElementById('articleCountDisplay');if(ce)ce.textContent=all.length;
    renderTicker(markets);
    applyFilters();
    renderTopStories();
  }catch(err){
    const al=document.getElementById('articleList');
    if(al)al.innerHTML='<div style="padding:48px;text-align:center;color:var(--text-soft);font-family:DM Mono,monospace;font-size:12px">Could not load articles. Check your Supabase credentials.</div>';
  }
}
init();
</script>
</body></html>